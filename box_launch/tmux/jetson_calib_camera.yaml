session_name: jetson

before_script: "../scripts/initialize_session.sh"

windows:
- window_name: grand_tour_box_robot
  layout: tiled
  shell_command_before:
    - export HOSTNAME
    - export DISPLAY=:0.0
    - export ROS_MASTER_URI=http://192.168.2.51:11311
    - export ROS_IP=192.168.2.51

  options:
    pane-border-status: top
  panes:
    - shell_command:
      - source /opt/ros/noetic/setup.bash
      - source ~/catkin_ws/devel/setup.bash
      - roslaunch bringup_fkie fkie.launch
          autostart_launch_files:="
            $(rospack find box_health)/launch/box_health_client.launch
            $(rospack find bringup_ap20)/launch/ap20.launch
            $(rospack find box_recording)/launch/rosbag_record_coordinator.launch
            $(rospack find box_recording)/launch/rosbag_record_node.launch
            $(rospack find bringup_zed2i_visualization)/launch/zed2i_15hz.launch
            $(rospack find box_throttling)/launch/throttle_jetson.launch
            $(rospack find box_relaying)/launch/relay_jetson.launch
            "
          use_gui:=false
    - shell_command:
      - sleep 1
      - /data/workspaces/isaac_ros-dev/src/isaac_ros_common/scripts/run_recording.sh -c hdr_start
    - shell_command:
      - sleep 5
      - /data/workspaces/isaac_ros-dev/src/isaac_ros_common/scripts/run_recording.sh -c ros1_bridge_start
    - shell_command:
      - source /opt/ros/noetic/setup.bash
      - source ~/catkin_ws/devel/setup.bash
      - source ~/catkin_ws/src/grand_tour_box/box_configuration/jetson/alias.sh  
      - df -h /data
      focus: true